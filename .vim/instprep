" prepare directory setup

let _vim = $HOME . '/.vim'
for _subdir in ['backup', 'undo']
    let _dir = _vim . '/' . _subdir
    if !isdirectory(_dir)
        call mkdir(_dir, 'p')
    endif
endfor

" grab the plugins
if !filereadable(_vim . '/bundle/.init')
    setlocal buftype=nofile
    let _pipeline = 'cd ' . _vim . '/bundle && mr update && touch .init'
    let _stdout = system(_pipeline)
    call append(0, split(_stdout, '\v\n'))
    unlet _pipeline
    unlet _stdout
endif

unlet _vim
unlet _dir
unlet _subdir

" vim: syntax=vim ft=vim
